(()=>{"use strict";var e={990:(e,a,t)=>{t.d(a,{Z:()=>h});var r=t(81),c=t.n(r),s=t(645),n=t.n(s)()(c());n.push([e.id,"body{margin:30px;background-color:black;user-select:none}.section{max-width:800px;margin:0 auto}.textarea{display:block;width:100%;margin-bottom:40px;resize:none;background-color:white;user-select:none}.keyboard{display:grid;grid-gap:10px;grid-template-columns:repeat(15, 1fr)}.key{cursor:pointer;transition:border-radius .2s, background-color .2s;padding:5px;font-weight:bold;border:2px solid gray;border-radius:3px}.key:hover{border-radius:10px}.key--pressed{border-radius:10px;background-color:red}.key--span_1{grid-column-end:span 1}.key--span_2{grid-column-end:span 2}.key--span_6{grid-column-end:span 6}.key--span_7{grid-column-end:span 7}\n",""]);const h=n},645:e=>{e.exports=function(e){var a=[];return a.toString=function(){return this.map((function(a){var t="",r=void 0!==a[5];return a[4]&&(t+="@supports (".concat(a[4],") {")),a[2]&&(t+="@media ".concat(a[2]," {")),r&&(t+="@layer".concat(a[5].length>0?" ".concat(a[5]):""," {")),t+=e(a),r&&(t+="}"),a[2]&&(t+="}"),a[4]&&(t+="}"),t})).join("")},a.i=function(e,t,r,c,s){"string"==typeof e&&(e=[[null,e,void 0]]);var n={};if(r)for(var h=0;h<this.length;h++){var i=this[h][0];null!=i&&(n[i]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);r&&n[l[0]]||(void 0!==s&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=s),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),c&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=c):l[4]="".concat(c)),a.push(l))}},a}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var a=[];function t(e){for(var t=-1,r=0;r<a.length;r++)if(a[r].identifier===e){t=r;break}return t}function r(e,r){for(var s={},n=[],h=0;h<e.length;h++){var i=e[h],o=r.base?i[0]+r.base:i[0],l=s[o]||0,d="".concat(o," ").concat(l);s[o]=l+1;var p=t(d),y={css:i[1],media:i[2],sourceMap:i[3],supports:i[4],layer:i[5]};if(-1!==p)a[p].references++,a[p].updater(y);else{var u=c(y,r);r.byIndex=h,a.splice(h,0,{identifier:d,updater:u,references:1})}n.push(d)}return n}function c(e,a){var t=a.domAPI(a);return t.update(e),function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap&&a.supports===e.supports&&a.layer===e.layer)return;t.update(e=a)}else t.remove()}}e.exports=function(e,c){var s=r(e=e||[],c=c||{});return function(e){e=e||[];for(var n=0;n<s.length;n++){var h=t(s[n]);a[h].references--}for(var i=r(e,c),o=0;o<s.length;o++){var l=t(s[o]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}s=i}}},569:e=>{var a={};e.exports=function(e,t){var r=function(e){if(void 0===a[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}a[e]=t}return a[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},216:e=>{e.exports=function(e){var a=document.createElement("style");return e.setAttributes(a,e.attributes),e.insert(a,e.options),a}},565:(e,a,t)=>{e.exports=function(e){var a=t.nc;a&&e.setAttribute("nonce",a)}},795:e=>{e.exports=function(e){var a=e.insertStyleElement(e);return{update:function(t){!function(e,a,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var c=void 0!==t.layer;c&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,c&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var s=t.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),a.styleTagTransform(r,e,a.options)}(a,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)}}}},589:e=>{e.exports=function(e,a){if(a.styleSheet)a.styleSheet.cssText=e;else{for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(e))}}}},a={};function t(r){var c=a[r];if(void 0!==c)return c.exports;var s=a[r]={id:r,exports:{}};return e[r](s,s.exports,t),s.exports}t.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},t.d=(e,a)=>{for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e=t(379),a=t.n(e),r=t(795),c=t.n(r),s=t(569),n=t.n(s),h=t(565),i=t.n(h),o=t(216),l=t.n(o),d=t(589),p=t.n(d),y=t(990),u={};u.styleTagTransform=p(),u.setAttributes=i(),u.insert=n().bind(null,"head"),u.domAPI=c(),u.insertStyleElement=l(),a()(y.Z,u),y.Z&&y.Z.locals&&y.Z.locals;class C{constructor(){const e=document.createElement("textarea");e.classList.add("textarea","section"),e.disabled=!0,e.rows=10,this.element=e}writeChar(e){this.element.value+=e}removeChar(){const e=this.element.value;this.element.value=e.slice(0,-1)}render({element:e}){e.append(this.element)}}class m extends EventTarget{constructor({code:e,label:a,span:t}){super(),this.code=e,this.wasMouseDown=!1;const r=document.createElement("button");this.element=r,r.classList.add("key",`key--span_${t}`),r.innerText=a,r.addEventListener("mousedown",(()=>{this.wasMouseDown=!0,this.emitKeyDown()})),document.addEventListener("mouseup",this.globalMouseUpHandler.bind(this))}globalMouseUpHandler(){this.wasMouseDown&&this.emitKeyUp()}emitKeyDown(){this.element.classList.add("key--pressed");const e=new CustomEvent("key-down",{detail:{code:this.code}});this.dispatchEvent(e)}emitKeyUp(){this.wasMouseDown=!1,this.element.classList.remove("key--pressed");const e=new CustomEvent("key-up",{detail:{code:this.code}});this.dispatchEvent(e)}getElement(){return this.element}emulateKeyDown(){this.emitKeyDown()}emulateKeyUp(){this.emitKeyUp()}}class f extends EventTarget{constructor(e){super();const{code:a}=e;this.code=a;const t=document.createElement("button");this.element=t,t.classList.add("key"),e.span&&t.classList.add("key",`key--span_${e.span}`),t.addEventListener("mouseup",this.emitKeyUp.bind(this)),t.addEventListener("mousedown",(()=>{this.wasMouseDown=!0,this.emitKeyDown()})),document.addEventListener("mouseup",this.globalMouseUpHandler.bind(this))}globalMouseUpHandler(){this.wasMouseDown&&this.emitKeyUp()}setCap(e){this.cap=e,this.updateCap()}emitKeyUp(){this.wasMouseDown=!1,this.element.classList.remove("key--pressed");const e=new CustomEvent("key-up",{detail:{code:this.code}});this.dispatchEvent(e)}emitKeyDown(){this.element.classList.add("key--pressed");const e=new CustomEvent("key-down",{detail:{code:this.code,char:this.cap.char,altChar:this.cap.altChar}});this.dispatchEvent(e)}emulateKeyUp(){this.emitKeyUp()}emulateKeyDown(){this.emitKeyDown()}updateCap(){this.element.innerText=this.cap.char}getElement(){return this.element}}class K{constructor(e){const a=document.createElement("div");this.element=a,this.keys={},this.charKeys={},this.functionalKeyCodes=[],this.charKeyCodes=[],this.shiftActive=!1,this.altActive=!1,this.capsActive=!1,this.capsList=[],this.currentCapIndex=null,this.capsLockLocked=!1,a.classList.add("keyboard","section"),e.lines.forEach((e=>{e.forEach((e=>{let a;"functional"===e.type?(a=new m(e),this.functionalKeyCodes.push(e.code),a.addEventListener("key-down",this.handleShiftDown.bind(this)),a.addEventListener("key-up",this.handleShiftUp.bind(this)),a.addEventListener("key-down",this.handleAltDown.bind(this)),a.addEventListener("key-up",this.handleAltUp.bind(this)),a.addEventListener("key-down",this.handleCapsLockDown.bind(this)),a.addEventListener("key-up",this.handleCapsLockUp.bind(this)),a.addEventListener("key-down",this.handleBackspaceDown.bind(this))):"char"===e.type&&(a=new f(e),this.charKeyCodes.push(e.code),this.charKeys[e.code]={caps:[],currentCap:null,key:a},a.addEventListener("key-down",this.handleCharacterInput.bind(this))),this.keys[e.code]=a,this.element.append(a.getElement())}))})),document.addEventListener("keyup",this.handleKeyUp.bind(this)),document.addEventListener("keydown",this.handleKeyDown.bind(this))}isAltCharActive(){return this.capsActive&&!this.shiftActive||!this.capsActive&&this.shiftActive}handleKeyDown(e){if(!Object.keys(this.keys).includes(e.code))return;const{code:a}=e;e.preventDefault(),this.keys[a].emulateKeyDown()}handleKeyUp(e){if(!Object.keys(this.keys).includes(e.code))return;const{code:a}=e;e.preventDefault(),this.keys[a].emulateKeyUp()}handleShiftUp(e){"ShiftLeft"!==e.detail.code&&"ShiftRight"!==e.detail.code||(this.shiftActive=!1)}handleBackspaceDown(e){"Backspace"===e.detail.code&&this.output.removeChar()}handleCapsLockDown(e){this.capsLockLocked||"CapsLock"!==e.detail.code||(this.capsLockLocked=!0,this.capsActive=!this.capsActive)}handleCapsLockUp(e){"CapsLock"===e.detail.code&&(this.capsLockLocked=!1)}handleShiftDown(e){"ShiftLeft"!==e.detail.code&&"ShiftRight"!==e.detail.code||(this.altActive&&this.changeCaps(),this.shiftActive=!0)}handleCharacterInput(e){this.isAltCharActive()?this.output.writeChar(e.detail.altChar):this.output.writeChar(e.detail.char)}handleAltUp(e){"AltLeft"!==e.detail.code&&"AltRight"!==e.detail.code||(this.altActive=!1)}handleAltDown(e){"AltLeft"!==e.detail.code&&"AltRight"!==e.detail.code||(this.altActive=!0)}changeCaps(){this.currentCapIndex===this.capsList.length-1?this.currentCapIndex=0:this.currentCapIndex+=1,this.updateCaps()}setCaps(e){const a=this.capsList.findIndex((a=>a===e));-1!==a&&(this.currentCapIndex=a,this.updateCaps())}updateCaps(){localStorage.setItem("virtual-keyboard-layout",this.capsList[this.currentCapIndex]),Object.keys(this.charKeys).forEach((e=>{this.charKeys[e].currentCap=this.capsList[this.currentCapIndex],this.charKeys[e].key.setCap(this.charKeys[e].caps[this.currentCapIndex])}))}loadLocalLayout(){if(localStorage.getItem("virtual-keyboard-layout")){const e=localStorage.getItem("virtual-keyboard-layout");this.setCaps(e)}else this.setCaps("US")}attachCaps(e,a){this.capsList.push(e),Object.entries(a.keycaps).forEach((([e,a])=>{this.charKeys[e].caps.push(a)}))}attachOutput(e){this.output=e}render({element:e}){e.append(this.element)}}const v=JSON.parse('{"lines":[[{"type":"char","code":"Backquote","label":"`","span":1},{"type":"char","code":"Digit1","span":1},{"type":"char","code":"Digit2","span":1},{"type":"char","code":"Digit3","span":1},{"type":"char","code":"Digit4","span":1},{"type":"char","code":"Digit5","span":1},{"type":"char","code":"Digit6","span":1},{"type":"char","code":"Digit7","span":1},{"type":"char","code":"Digit8","span":1},{"type":"char","code":"Digit9","span":1},{"type":"char","code":"Digit0","span":1},{"type":"char","code":"Minus","span":1},{"type":"char","code":"Equal","span":1},{"type":"functional","code":"Backspace","label":"Backspace","span":2}],[{"type":"functional","code":"Tab","label":"Tab","span":2},{"type":"char","code":"KeyQ","span":1},{"type":"char","code":"KeyW","span":1},{"type":"char","code":"KeyE","span":1},{"type":"char","code":"KeyR","span":1},{"type":"char","code":"KeyT","span":1},{"type":"char","code":"KeyY","span":1},{"type":"char","code":"KeyU","span":1},{"type":"char","code":"KeyI","span":1},{"type":"char","code":"KeyO","span":1},{"type":"char","code":"KeyP","span":1},{"type":"char","code":"BracketLeft","span":1},{"type":"char","code":"BracketRight","span":1},{"type":"char","code":"Backslash","span":1}],[{"type":"functional","code":"CapsLock","label":"Caps Lock","span":2},{"type":"char","code":"KeyA","span":1},{"type":"char","code":"KeyS","span":1},{"type":"char","code":"KeyD","span":1},{"type":"char","code":"KeyF","span":1},{"type":"char","code":"KeyG","span":1},{"type":"char","code":"KeyH","span":1},{"type":"char","code":"KeyJ","span":1},{"type":"char","code":"KeyK","span":1},{"type":"char","code":"KeyL","span":1},{"type":"char","code":"Semicolon","span":1},{"type":"char","code":"Quote","span":1},{"type":"functional","code":"Enter","label":"Enter","span":2}],[{"type":"functional","code":"ShiftLeft","label":"Shift","span":2},{"type":"char","code":"KeyZ","span":1},{"type":"char","code":"KeyX","span":1},{"type":"char","code":"KeyC","span":1},{"type":"char","code":"KeyV","span":1},{"type":"char","code":"KeyB","span":1},{"type":"char","code":"KeyN","span":1},{"type":"char","code":"KeyM","span":1},{"type":"char","code":"Comma","span":1},{"type":"char","code":"Period","span":1},{"type":"char","code":"Slash","span":1},{"type":"char","code":"ArrowUp","label":"↑","span":1},{"type":"functional","code":"ShiftRight","label":"Shift","span":2}],[{"type":"functional","code":"ControlLeft","label":"Ctrl","span":1},{"type":"functional","code":"MetaLeft","label":"Cmd","span":1},{"type":"functional","code":"AltLeft","label":"Alt","span":1},{"type":"char","code":"Space","label":" ","span":6},{"type":"functional","code":"AltRight","label":"Alt","span":1},{"type":"functional","code":"ControlRight","label":"Ctrl","span":1},{"type":"char","code":"ArrowLeft","label":"←","span":1},{"type":"char","code":"ArrowDown","label":"↓","span":1},{"type":"char","code":"ArrowRight","label":"→","span":1}]]}'),g=JSON.parse('{"keycaps":{"Backquote":{"char":"`","altChar":"~"},"Digit1":{"char":"1","altChar":"!"},"Digit2":{"char":"2","altChar":"@"},"Digit3":{"char":"3","altChar":"#"},"Digit4":{"char":"4","altChar":"$"},"Digit5":{"char":"5","altChar":"%"},"Digit6":{"char":"6","altChar":"^"},"Digit7":{"char":"7","altChar":"&"},"Digit8":{"char":"8","altChar":"*"},"Digit9":{"char":"9","altChar":"("},"Digit0":{"char":"10","altChar":")"},"Minus":{"char":"-","altChar":"_"},"Equal":{"char":"=","altChar":"+"},"KeyQ":{"char":"q","altChar":"Q"},"KeyW":{"char":"w","altChar":"W"},"KeyE":{"char":"e","altChar":"E"},"KeyR":{"char":"r","altChar":"R"},"KeyT":{"char":"t","altChar":"T"},"KeyY":{"char":"y","altChar":"Y"},"KeyU":{"char":"u","altChar":"U"},"KeyI":{"char":"i","altChar":"I"},"KeyO":{"char":"o","altChar":"O"},"KeyP":{"char":"p","altChar":"P"},"BracketLeft":{"char":"[","altChar":"{"},"BracketRight":{"char":"]","altChar":"}"},"Backslash":{"char":"\\\\","altChar":"|"},"KeyA":{"char":"a","altChar":"A"},"KeyS":{"char":"s","altChar":"S"},"KeyD":{"char":"d","altChar":"D"},"KeyF":{"char":"f","altChar":"F"},"KeyG":{"char":"g","altChar":"G"},"KeyH":{"char":"h","altChar":"H"},"KeyJ":{"char":"j","altChar":"J"},"KeyK":{"char":"k","altChar":"K"},"KeyL":{"char":"l","altChar":"L"},"Semicolon":{"char":";","altChar":":"},"Quote":{"char":"\'","altChar":"\\""},"KeyZ":{"char":"z","altChar":"Z"},"KeyX":{"char":"x","altChar":"X"},"KeyC":{"char":"c","altChar":"C"},"KeyV":{"char":"v","altChar":"V"},"KeyB":{"char":"b","altChar":"B"},"KeyN":{"char":"n","altChar":"N"},"KeyM":{"char":"m","altChar":"M"},"Comma":{"char":",","altChar":"<"},"Period":{"char":".","altChar":">"},"Slash":{"char":"/","altChar":"?"},"Space":{"char":" ","altChar":" "},"ArrowLeft":{"char":"←","altChar":"←"},"ArrowRight":{"char":"→","altChar":"→"},"ArrowUp":{"char":"↑","altChar":"↑"},"ArrowDown":{"char":"↓","altChar":"↓"}}}'),k=JSON.parse('{"keycaps":{"Backquote":{"char":"ё","altChar":"Ё"},"Digit1":{"char":"1","altChar":"!"},"Digit2":{"char":"2","altChar":"\\""},"Digit3":{"char":"3","altChar":"№"},"Digit4":{"char":"4","altChar":";"},"Digit5":{"char":"5","altChar":"%"},"Digit6":{"char":"6","altChar":":"},"Digit7":{"char":"7","altChar":"?"},"Digit8":{"char":"8","altChar":"*"},"Digit9":{"char":"9","altChar":"("},"Digit0":{"char":"10","altChar":")"},"Minus":{"char":"-","altChar":"_"},"Equal":{"char":"=","altChar":"+"},"KeyQ":{"char":"й","altChar":"Й"},"KeyW":{"char":"ц","altChar":"Ц"},"KeyE":{"char":"у","altChar":"У"},"KeyR":{"char":"к","altChar":"К"},"KeyT":{"char":"е","altChar":"Е"},"KeyY":{"char":"н","altChar":"Н"},"KeyU":{"char":"г","altChar":"Г"},"KeyI":{"char":"ш","altChar":"Ш"},"KeyO":{"char":"щ","altChar":"Щ"},"KeyP":{"char":"з","altChar":"З"},"BracketLeft":{"char":"х","altChar":"Х"},"BracketRight":{"char":"ъ","altChar":"Ъ"},"Backslash":{"char":"\\\\","altChar":"|"},"KeyA":{"char":"ф","altChar":"Ф"},"KeyS":{"char":"ы","altChar":"Ы"},"KeyD":{"char":"в","altChar":"В"},"KeyF":{"char":"а","altChar":"А"},"KeyG":{"char":"п","altChar":"П"},"KeyH":{"char":"р","altChar":"Р"},"KeyJ":{"char":"о","altChar":"О"},"KeyK":{"char":"л","altChar":"Л"},"KeyL":{"char":"д","altChar":"Д"},"Semicolon":{"char":"ж","altChar":"Ж"},"Quote":{"char":"э","altChar":"Э"},"KeyZ":{"char":"я","altChar":"Я"},"KeyX":{"char":"ч","altChar":"Ч"},"KeyC":{"char":"с","altChar":"С"},"KeyV":{"char":"м","altChar":"М"},"KeyB":{"char":"и","altChar":"И"},"KeyN":{"char":"т","altChar":"Т"},"KeyM":{"char":"ь","altChar":"Ь"},"Comma":{"char":"б","altChar":"Б"},"Period":{"char":"ю","altChar":"Ю"},"Slash":{"char":".","altChar":","},"Space":{"char":" ","altChar":" "},"ArrowLeft":{"char":"←","altChar":"←"},"ArrowRight":{"char":"→","altChar":"→"},"ArrowUp":{"char":"↑","altChar":"↑"},"ArrowDown":{"char":"↓","altChar":"↓"}}}');document.addEventListener("DOMContentLoaded",(()=>{const e=new C;e.render({element:document.body});const a=new K(v);a.attachCaps("US",g),a.attachCaps("RU",k),a.loadLocalLayout(),a.attachOutput(e),a.render({element:document.body})}))})()})();